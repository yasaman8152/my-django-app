{% extends 'courses/base.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/profile.css' %}">

<div class="profile-container">
  <h2>Ù¾Ø±ÙˆÙØ§ÛŒÙ„ {{ request.user.username }}</h2>

  <!-- ØªØ¨â€ŒÙ‡Ø§ -->
  <div class="tabs">
    <button class="tab-button active" data-tab="courses">ğŸ“ Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</button>
    <button class="tab-button" data-tab="info">ğŸ‘¤ Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø±</button>
    <button class="tab-button" data-tab="cart">ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
  </div>

  <!-- Ù…Ø­ØªÙˆØ§ÛŒ ØªØ¨â€ŒÙ‡Ø§ -->
  <div id="courses" class="tab-content active">
    <h3>Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯Ù‡â€ŒØ´Ø¯Ù‡</h3>
    {% if purchased_courses %}
      <ul>
        {% for course in purchased_courses %}
          <li>{{ course.title }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</p>
    {% endif %}
  </div>

  <div id="info" class="tab-content">
    <h3>Ù…Ø´Ø®ØµØ§Øª Ú©Ø§Ø±Ø¨Ø±</h3>
    {% if request.user.profile.avatar %}
      <img src="{{ request.user.profile.avatar.url }}" width="100" alt="Avatar">
      {% endif %}
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
      </form>
    </div>
    <div id="cart" class="tab-content">
      <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
      {% if cart_items %}
      <ul>
        {% for item in cart_items %}
        <li>{{ item.course.title }} - {{ item.course.price }} ØªÙˆÙ…Ø§Ù†</li>
        {% endfor %}
      </ul>
      {% else %}
      <p>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.</p>
      {% endif %}
    </div>
    <a href="{% url 'users:logout' %}" class="logout-link">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨</a>
  </div>
  <!-- Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± ØªØ¨â€ŒÙ‡Ø§ -->
  <script>
    const tabs = document.querySelectorAll(".tab-button");
    const contents = document.querySelectorAll(".tab-content");
    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("active"));
        contents.forEach(c => c.classList.remove("active"));
        tab.classList.add("active");
        document.getElementById(tab.dataset.tab).classList.add("active");
      });
    });
  </script>
    <script>
  // Ù‡Ù…Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¨ Ùˆ Ù…Ø­ØªÙˆØ§Ù‡Ø§ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
  const tabs = document.querySelectorAll(".tab-button");
  const contents = document.querySelectorAll(".tab-content");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      // Ù‡Ù…Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø§Ø² Ø­Ø§Ù„Øª active Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´Ù†
      tabs.forEach(t => t.classList.remove("active"));

      // Ù‡Ù…Ù‡ Ù…Ø­ØªÙˆØ§Ù‡Ø§ Ù¾Ù†Ù‡Ø§Ù† Ù…ÛŒâ€ŒØ´Ù†
      contents.forEach(c => c.classList.remove("active"));

      // ØªØ¨ Ú©Ù„ÛŒÚ©â€ŒØ´Ø¯Ù‡ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´Ù‡
      tab.classList.add("active");

      // Ø¢ÛŒâ€ŒØ¯ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§ÙˆÙ† ØªØ¨ Ø±Ùˆ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ…
      const tabId = tab.dataset.tab;

      // ÙÙ‚Ø· Ù…Ø­ØªÙˆØ§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ØªØ¨ ÙØ¹Ø§Ù„ Ù†Ø´ÙˆÙ† Ø¯Ø§Ø¯Ù‡ Ù…ÛŒØ´Ù‡
      document.getElementById(tabId).classList.add("active");
    });
  });
</script>
  {% endblock %}

